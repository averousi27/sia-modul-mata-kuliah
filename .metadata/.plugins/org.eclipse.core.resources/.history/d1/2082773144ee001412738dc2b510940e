package com.AIS.Modul.MataKuliah.Service;

import java.util.ArrayList;
import java.util.List;

import com.AIS.Modul.MataKuliah.Model.MK;
 

public class MKServiceImpl implements MKService{

	private String [] column = {"k.idKurikulum","k.nmKurikulum", "satMan.nmSatMan","k.thnMulai","k.thnAkhir","k.aStatusKurikulum"};
	private Boolean[] searchable = {false,true,true,true,true,false};
	
	@Override
	public Datatable getdatatable(String sEcho, int iDisplayLength,
			int iDisplayStart, int iSortCol_0, String sSortDir_0,
			String sSearch, String filter) {
		// TODO Auto-generated method stub
			DatatableExtractParams parameter = new DatatableExtractParams(sSearch, this.column, this.searchable, iSortCol_0, sSortDir_0);
			Datatable kurikulumDatatable= new Datatable();
			kurikulumDatatable.setsEcho(sEcho);
			String dbFilter = "";
			if(filter != null && !filter.equals("")) dbFilter+=" AND "+filter; 
			List<MK> queryResult = get("("+parameter.getWhere()+")"+dbFilter, parameter.getOrder(), iDisplayLength, iDisplayStart);
			List<String[]> aData = new ArrayList<String[]>();
			for (MK mk : queryResult) {
				String[] mkString = new String[7];
				mkString[0] = mk.getIdKurikulum().toString();
				mkString[1] = String.valueOf(kurikulum.getNmKurikulum());
				mkString[2] = String.valueOf(kurikulum.getSatMan().getNmSatMan());
				mkString[3] = String.valueOf(kurikulum.getThnMulai());
				mkString[4] = String.valueOf(kurikulum.getThnAkhir());
				mkString[5] = String.valueOf(kurikulum.getaStatusKurikulum());
				mkString[6] = String.valueOf(kurikulum.getaStatusKurikulum());
				aData.add(mkString);
			}
			kurikulumDatatable.setAaData(aData);
			kurikulumDatatable.setiTotalRecords(kurikulumRepo.count(""));
			kurikulumDatatable.setiTotalDisplayRecords(kurikulumRepo.count("("+parameter.getWhere()+") AND "+filter));

			return kurikulumDatatable;
	}

	private List<MK> get(String string, String order, int iDisplayLength,
			int iDisplayStart) {
		// TODO Auto-generated method stub
		return null;
	}

}
